<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Dashboard{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 h-screen flex">

    <!-- Sidebar -->
    <aside class="w-32 bg-gradient-to-b from-blue-700 to-blue-800 text-white flex flex-col p-6 shadow-lg">
        <!-- User avatar -->
        <div class="flex flex-col items-center mb-8">
            <div class="w-16 h-16 rounded-full overflow-hidden border-2 border-white mb-2">
                <img src="{{ session.get('avatar_url', '/static/default-avatar.png') }}" alt="User Avatar" class="w-full h-full object-cover">
            </div>
            <span class="text-sm font-semibold text-center">
                {{ session.get('email').split('@')[0] if session.get('email') else 'Guest' }}
            </span>
        </div>

        <!-- Navigation -->
        <nav class="flex flex-col flex-1 justify-between">
            <div class="flex flex-col space-y-3">
                <a href="{{ url_for('dept.list_depts') }}" class="hover:bg-blue-600 px-4 py-2 rounded-lg transition">Dept</a>
                <a href="{{ url_for('staff.list_staffs') }}" class="hover:bg-blue-600 px-4 py-2 rounded-lg transition">Staff</a>
                <a href="{{ url_for('task.list_tasks') }}" class="hover:bg-blue-600 px-4 py-2 rounded-lg transition">Tasks</a>
                <a href="{{ url_for('project.list_projects') }}" class="hover:bg-blue-600 px-4 py-2 rounded-lg transition">Projects</a>
                <a href="{{ url_for('main.home') }}" class="hover:bg-blue-600 px-4 py-2 rounded-lg transition">Home</a>
            </div>
        </nav>
    </aside>

    <!-- Main content area -->
    <div class="flex-1 flex flex-col overflow-hidden">

        <!-- Header -->
        <header class="bg-white shadow flex items-center justify-between px-6 py-3 flex-shrink-0 border-b border-gray-300">
            {% set add_routes = {
                "dept": "dept.add_dept",
                "staff": "staff.add_staff",
                "projects": "project.add_project"
            } %}

            {% if current_page in add_routes %}
                <a href="{{ url_for(add_routes[current_page]) }}"
                   class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition">New</a>
            {% else %}
                <button class="bg-gray-400 text-white px-4 py-2 rounded-lg cursor-not-allowed">New</button>
            {% endif %}

            <h1 class="text-xl font-bold text-center flex-1">{{ title or "Dashboard" }}</h1>
            <a href="{{ url_for('auth.logout') }}" class="text-red-600 hover:text-red-800 font-semibold transition">Logout</a>
        </header>




        <!-- Page content -->
        <main class="flex-1 bg-white p-6 overflow-auto">
            {% block content %}{% endblock %}
        </main>

    </div>

</body>
</html>
